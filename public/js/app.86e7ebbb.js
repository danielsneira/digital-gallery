(function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=e[2],d=0,m=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"0a7e":function(t,e,a){"use strict";a("b630")},"0d70":function(t,e,a){},"49a7":function(t,e,a){"use strict";a("0d70")},"4d8a":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=a("bc3a"),s=a.n(o),r=a("2106"),i=a.n(r),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[this.$store.state.accessToken?a("v-app-bar",{attrs:{app:"",dark:""}},[a("router-link",{attrs:{to:"/"}},[t._v("Digital Gallery")]),a("v-spacer"),a("router-link",{attrs:{to:"/profile"}},[t._v(t._s(this.$store.state.artist.fullname))]),a("v-spacer"),a("v-btn",{attrs:{to:"login",replace:"",text:""},on:{click:t.logout}},[a("v-icon",[t._v("mdi-logout")]),a("span",{staticClass:"mr-2"},[t._v("Exit")])],1)],1):t._e(),a("v-main",{staticClass:"main-bg"},[a("router-view")],1)],1)},c=[],u=(a("b0c0"),{name:"App",components:{},data:function(){return{}},watch:{$route:function(t,e){document.title=t.meta.title||"Digital Gallery"},immediate:!0},created:function(){this.checkToken()},methods:{logout:function(){sessionStorage.clear(),this.$store.commit("setToken","")},checkToken:function(){var t=sessionStorage.getItem("accessToken"),e=this.$router.currentRoute.name;t&&(this.$store.commit("setToken",t),this.accessToken=t);var a=this.$store.state.accessToken;if(!a&&"Login"!==e&&"Sign up"!==e)return this.$router.push("login")}},computed:{artist:function(){return sessionStorage.getItem("artist")}}}),d=u,m=(a("034f"),a("2877")),p=a("6544"),f=a.n(p),v=a("7496"),g=a("40dc"),h=a("8336"),w=a("132d"),b=a("f6c4"),_=a("2fa4"),k=Object(m["a"])(d,l,c,!1,null,null,null),x=k.exports;f()(k,{VApp:v["a"],VAppBar:g["a"],VBtn:h["a"],VIcon:w["a"],VMain:b["a"],VSpacer:_["a"]});var C=a("8c4f"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"main-bg",attrs:{fluid:""}},[a("div",{staticClass:"text-center"},[a("CloudinaryWidget",{on:{"new-post":t.newPost}})],1),t.posts?a("div",{staticClass:"posts"},t._l(t.posts,(function(e,n){return a("div",{key:n},[a("Art",{attrs:{_id:e._id,artist:e.artist,caption:e.caption,comments:e.comments,image:e.image,likes:e.likes,createdAt:e.createdAt},on:{"new-comment":t.newComment}})],1)})),0):t._e()])},V=[],A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{staticClass:"mx-auto my-12",attrs:{"max-width":"374"}},[a("v-card-title",[t._v(t._s(t.artist.fullname)+" "),a("v-spacer"),a("v-btn",{staticClass:"text-right",attrs:{color:t.followColor,text:""},on:{click:t.toggleFollow}},[t._v(" "+t._s(t.followText)+" ")])],1),a("v-spacer"),a("v-img",{attrs:{src:t.image}}),a("v-card-text",[a("div",[t._v(t._s(t.artist.fullname)+': "'+t._s(t.caption)+'"')])]),a("v-spacer"),t.comments&&t.comments.length>0?a("div",{staticClass:"comment"},t._l(t.comments,(function(e,n){return a("v-card",{key:n},[a("p",{staticClass:"artist-name"},[t._v(t._s(e.artist.fullname))]),a("p",{staticClass:"artist-comment"},[t._v(t._s(e.comment))])])})),1):t._e(),a("v-card-actions",[a("v-text-field",{attrs:{label:"agregar comentario..."},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),a("v-btn",{attrs:{color:"deep-purple lighten-2",text:""},on:{click:function(e){return t.postComment()}}},[t._v(" comment ")]),a("v-btn",{attrs:{icon:"",color:t.color},on:{click:t.toggleLike}},[a("v-icon",[t._v("mdi-heart")])],1)],1)],1)],1)},T=[],S={name:"Art",props:{_id:String,artist:Object,comments:Array,likes:Array,caption:String,image:String,createdAt:String},data:function(){return{comment:"",color:"",followColor:"deep-purple",followText:"follow +",like:!1,follow:!1}},methods:{toggleLike:function(){var t=this,e=this._id;s.a.post("/art/like",{artId:e,artist:this.$store.state.artist._id,like:!this.like}).then((function(){t.like=!t.like,t.like?t.color="purple":t.color="white"})).catch((function(t){alert(t.response.data.msg)}))},toggleFollow:function(){var t=this,e=this.$store.state.artist._id,a=this.artist._id;s.a.post("/artist/follow",{artistFollower:e,artistFollowing:a,follow:!this.follow}).then((function(){t.follow=!t.follow,t.follow?t.followColor="secondary":t.followColor="deep-purple",t.follow?t.followText="following":t.followText="follow +"})).catch((function(t){alert(t.response.data.msg)}))},postComment:function(){var t=this,e=this._id;s.a.post("/art/comment",{artId:e,artist:this.$store.state.artist._id,comment:this.comment}).then((function(){alert("comentario a√±adido"),t.comment="",t.$emit("new-comment")})).catch((function(t){alert(t.response.data.msg)}))}}},P=S,$=(a("0a7e"),a("b0af")),j=a("99d9"),F=a("adda"),O=a("8654"),I=Object(m["a"])(P,A,T,!1,null,"98b40d0e",null),E=I.exports;f()(I,{VBtn:h["a"],VCard:$["a"],VCardActions:j["a"],VCardText:j["b"],VCardTitle:j["c"],VIcon:w["a"],VImg:F["a"],VSpacer:_["a"],VTextField:O["a"]});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"600"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{dark:""}},"v-btn",o,!1),n),[t._v("Crear publicacion ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:""}},[a("v-toolbar-title",[t._v("Crea una publicacion")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card-actions",[a("v-btn",{staticClass:"post",attrs:{dark:"",id:"upload_widget"},on:{click:t.openWidget}},[t._v(" Upload files ")]),a("v-text-field",{attrs:{label:"Descripcion"},model:{value:t.caption,callback:function(e){t.caption=e},expression:"caption"}})],1),a("v-card-actions",[a("v-btn",{staticClass:"align-center",attrs:{dark:""},on:{click:t.postArt}},[t._v(" Publicar ")])],1),a("div",{attrs:{id:"preview"}},[t.imageUrl?a("v-img",{staticClass:"img-preview",attrs:{height:"300",width:"200",src:t.imageUrl}}):t._e()],1)],1)],1)],1)},B=[],q={name:"cloudinaryWidget",props:{},data:function(){return{dialog:!1,imageUrl:"",caption:""}},methods:{postArt:function(){var t=this;s.a.post("/art/upload",{artist:this.$store.state.artist._id,image:this.imageUrl,caption:this.caption}).then((function(){t.dialog=!1,alert("Image uploaded successfully"),t.$emit("new-post")})).catch((function(t){alert(t.response.data.msg)}))},openWidget:function(){var t=this;window.cloudinary.openUploadWidget({cloud_name:"dw9kvdvau",upload_preset:"xs3fuayl",sources:["local","facebook","instagram","google_drive"],showAdvancedOptions:!1,cropping:!1,multiple:!1,defaultSource:"local",styles:{palette:{window:"#10173a",sourceBg:"#20304b",windowBorder:"#7171D0",tabIcon:"#79F7FF",inactiveTabIcon:"#8E9FBF",menuIcons:"#CCE8FF",link:"#72F1FF",action:"#5333FF",inProgress:"#00ffcc",complete:"#33ff00",error:"#cc3333",textDark:"#000000",textLight:"#ffffff"},fonts:{default:null,"'IBM Plex Sans', sans-serif":{url:"https://fonts.googleapis.com/css?family=IBM+Plex+Sans",active:!0}}}},(function(e,a){!e&&a&&"success"===a.event&&(t.imageUrl=a.info.url)})).open()}}},U=q,L=(a("bbf3"),a("169a")),M=a("71d9"),D=a("2a7f"),W=Object(m["a"])(U,R,B,!1,null,"176f6264",null),H=W.exports;f()(W,{VBtn:h["a"],VCard:$["a"],VCardActions:j["a"],VDialog:L["a"],VIcon:w["a"],VImg:F["a"],VSpacer:_["a"],VTextField:O["a"],VToolbar:M["a"],VToolbarTitle:D["a"]});var z={name:"Home",components:{Art:E,CloudinaryWidget:H},data:function(){return{posts:[]}},created:function(){this.getArt()},methods:{newComment:function(){this.getArt()},newPost:function(){this.getArt()},getArt:function(){var t=this;s.a.get("/art/",{}).then((function(e){t.posts=e.data})).catch((function(t){console.error(t)}))}}},G=z,J=a("a523"),N=Object(m["a"])(G,y,V,!1,null,null,null),K=N.exports;f()(N,{VContainer:J["a"]});var Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"main-bg",attrs:{fluid:""}},[a("v-row",{staticStyle:{height:"100vh"},attrs:{align:"center",justify:"center"}},[a("v-card",{staticClass:"mx-auto justify-center text-center sign-up-card",attrs:{elevation:"2",outlined:""}},[a("v-form",{ref:"login",staticClass:"ma-5 pa-5",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("h1",{staticClass:"text-center"},[t._v("Log in")]),a("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{rules:t.passwordRules,label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-btn",{staticClass:"mr-4 my-5",attrs:{disabled:!t.valid,color:"teal"},on:{click:t.logIn}},[t._v(" Log in ")]),a("p",[t._v("Don't have an account? "),a("router-link",{attrs:{to:"./sign-up"}},[t._v("Sign up")])],1)],1)],1)],1)],1)},X=[],Y={data:function(){return{valid:!0,email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],password:"",passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=4||"Must be more than 5 characters"}]}},methods:{logIn:function(){var t=this,e=this.$refs.login.validate();e&&s.a.post("/auth/login",{email:this.email,password:this.password}).then((function(e){t.$store.dispatch("setToken",e.data.token),t.$store.dispatch("setArtist",e.data.artist),t.$router.push("/")})).catch((function(t){alert(t.response.data.msg)}))}}},Z=Y,tt=(a("8b8e"),a("4bd4")),et=a("0fd9"),at=Object(m["a"])(Z,Q,X,!1,null,"2239b966",null),nt=at.exports;f()(at,{VBtn:h["a"],VCard:$["a"],VContainer:J["a"],VForm:tt["a"],VRow:et["a"],VTextField:O["a"]});var ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"main-bg"},[a("v-row",{staticStyle:{height:"100vh"},attrs:{align:"center",justify:"center"}},[a("v-card",{staticClass:"mx-auto justify-center text-center sign-up-card",attrs:{elevation:"2",outlined:""}},[a("v-form",{ref:"signup",staticClass:"ma-5 pa-5",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("h1",{staticClass:"text-center"},[t._v("Sign up")]),a("v-text-field",{attrs:{rules:t.nameRules,label:"Name",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{rules:t.passwordRules,label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{rules:t.rePasswordRules,label:"Password confirm",type:"password",required:""},model:{value:t.rePassword,callback:function(e){t.rePassword=e},expression:"rePassword"}}),a("v-btn",{staticClass:"mr-4 my-5",attrs:{disabled:!t.valid,color:"teal"},on:{click:t.signUp}},[t._v(" Sign Up ")]),a("p",[t._v("Have an account? "),a("router-link",{attrs:{to:"./login"}},[t._v("Log in")])],1)],1)],1)],1)],1)},st=[],rt={data:function(){return{valid:!0,name:"",nameRules:[function(t){return!!t||"Name is required"}],email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],password:"",passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=5||"Must be more than 5 characters"}],rePassword:""}},computed:{rePasswordRules:function(){var t=this;return[function(t){return!!t||"Please repeat the password here"},function(e){return e===t.password||"passwords must match"}]}},methods:{signUp:function(){var t=this,e=this.$refs.signup.validate();e&&s.a.post("/auth/sign-up",{fullname:this.name,email:this.email,password:this.password}).then((function(){t.$router.push("/login")})).catch((function(t){alert(t.response.data.msg)}))}}},it=rt,lt=(a("49a7"),Object(m["a"])(it,ot,st,!1,null,"5db83012",null)),ct=lt.exports;f()(lt,{VBtn:h["a"],VCard:$["a"],VContainer:J["a"],VForm:tt["a"],VRow:et["a"],VTextField:O["a"]});var ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"main-bg",attrs:{fluid:""}},[a("div",{staticClass:"text-center"},[a("div",{staticClass:"text-center"},[a("CloudinaryWidget",{on:{"new-post":t.newPost}})],1)]),t.posts?a("div",{staticClass:"posts"},t._l(t.posts,(function(e,n){return a("div",{key:n},[a("Art",{attrs:{_id:e._id,artist:e.artist,caption:e.caption,comments:e.comments,image:e.image,likes:e.likes,createdAt:e.createdAt},on:{"new-comment":t.newComment}})],1)})),0):t._e()])},dt=[],mt={name:"Profile",components:{Art:E,CloudinaryWidget:H},data:function(){return{posts:[]}},created:function(){this.getArtByArtist()},methods:{getArtByArtist:function(){var t=this,e=this.$store.state.artist._id;s.a.get("/art/artist/".concat(e)).then((function(e){t.posts=e.data,console.log(e.data)})).catch((function(t){console.error(t)}))},newComment:function(){this.getArtByArtist()},newPost:function(){this.getArtByArtist()}}},pt=mt,ft=Object(m["a"])(pt,ut,dt,!1,null,null,null),vt=ft.exports;f()(ft,{VContainer:J["a"]}),n["a"].use(C["a"]);var gt=[{path:"/",name:"Home",component:K,meta:{auth:!0,title:"Dashboard"}},{path:"/login",name:"Login",component:nt,meta:{auth:!1,title:"Log in"}},{path:"/sign-up",name:"Sign up",component:ct,meta:{auth:!1,title:"Sign up"}},{path:"/profile",name:"Profile",component:vt,meta:{auth:!0,title:"Profile"}}],ht=new C["a"]({mode:"history",base:"/",routes:gt}),wt=ht,bt=a("2f62"),_t=a("0e44");n["a"].use(bt["a"]);var kt=new bt["a"].Store({plugins:[Object(_t["a"])({storage:window.sessionStorage})],state:{accessToken:"",artist:{}},mutations:{setToken:function(t,e){t.accessToken=e,sessionStorage.setItem("accessToken",e)},setArtist:function(t,e){t.artist=e,sessionStorage.setItem("artist",e.fullname)}},actions:{setToken:function(t,e){t.commit("setToken",e)},setArtist:function(t,e){t.commit("setArtist",e)}},modules:{}}),xt=a("f309");n["a"].use(xt["a"]);var Ct=new xt["a"]({theme:{dark:!0}});n["a"].config.productionTip=!1,s.a.defaults.baseURL="/api",new n["a"]({router:wt,store:kt,vuetify:Ct,render:function(t){return t(x)}}).$mount("#app"),n["a"].use(i.a,s.a)},"85ec":function(t,e,a){},"8b8e":function(t,e,a){"use strict";a("4d8a")},b630:function(t,e,a){},b7bd:function(t,e,a){},bbf3:function(t,e,a){"use strict";a("b7bd")}});
//# sourceMappingURL=app.86e7ebbb.js.map